-- ایجاد پایگاه داده
CREATE DATABASE MuseumDB;
GO
USE MuseumDB;
GO

----------------------------------------
-- جدول هنرمندان (Artist)
----------------------------------------
CREATE TABLE Artist (
    ArtistID INT IDENTITY(1,1) PRIMARY KEY,
    ArtistName NVARCHAR(100) NOT NULL,
    BirthYear INT NULL,
    Nationality NVARCHAR(80) NULL
);

----------------------------------------
-- جدول آثار (Artifact)
----------------------------------------
CREATE TABLE Artifact (
    ArtifactID INT IDENTITY(1,1) PRIMARY KEY,
    Name NVARCHAR(150) NOT NULL,
    CreationDate DATE NULL,
    Type NVARCHAR(100) NULL,
    ArtistID INT NOT NULL,
    FOREIGN KEY (ArtistID) REFERENCES Artist(ArtistID)
);

----------------------------------------
-- جدول نمایشگاه‌ها (Exhibition)
----------------------------------------
CREATE TABLE Exhibition (
    ExhibitionID INT IDENTITY(1,1) PRIMARY KEY,
    ExhibitionTitle NVARCHAR(150) NOT NULL,
    StartDate DATE NULL,
    EndDate DATE NULL
);

----------------------------------------
-- جدول واسط آثار ↔ نمایشگاه‌ها (M:N)
----------------------------------------
CREATE TABLE ArtifactExhibition (
    ArtifactID INT NOT NULL,
    ExhibitionID INT NOT NULL,
    PRIMARY KEY (ArtifactID, ExhibitionID),
    FOREIGN KEY (ArtifactID) REFERENCES Artifact(ArtifactID),
    FOREIGN KEY (ExhibitionID) REFERENCES Exhibition(ExhibitionID)
);






CREATE TABLE Visitor (
    VisitorID INT IDENTITY(1,1) PRIMARY KEY,    -- شناسه منحصر به فرد بازدیدکننده
    VisitorName NVARCHAR(100) NOT NULL,         -- نام بازدیدکننده
    BirthDate DATE NULL,                         -- تاریخ تولد
    Email NVARCHAR(150) NULL,                    -- ایمیل
    Phone NVARCHAR(20) NULL,                     -- شماره تماس
    MembershipID NVARCHAR(50) NULL              -- شماره عضویت (اختیاری)
);
